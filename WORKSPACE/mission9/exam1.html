<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        let dataList = [];
        function info(){
            // 추가 버튼
            let add = document.querySelector("#add");
            let tableList = document.querySelector("#tableList tbody");
            
            add.addEventListener("click", function(){
                let id = document.querySelector("#id").value;
                let pw = document.querySelector("#pw").value;
                let name = document.querySelector("#name").value;
                let email = document.querySelector("#email").value;
                let today = new Date();
                let createDt = `${today.getFullYear()}-${today.getMonth() + 1}-${today.getDate()}`;

                let data = {
                    id: id,
                    pw: pw,
                    name: name,
                    email: email,
                    createDt: createDt
                };

                dataList.push(data);

                
                renderTable();

                document.querySelector("#id").value = "";
                document.querySelector("#pw").value = "";
                document.querySelector("#name").value = "";
                document.querySelector("#email").value = "";
            });

            function renderTable(){
                let tableList = document.querySelector("#tableList tbody");
                let str = "";
                for(let i = 0; i < dataList.length; i++){
                    str += "<tr>";
                    str += `<td>${dataList[i].id}</td>`;
                    str += `<td>${dataList[i].pw}</td>`;
                    str += `<td>${dataList[i].name}</td>`;
                    str += `<td>${dataList[i].email}</td>`;
                    str += `<td>${dataList[i].createDt}</td>`;
                    str += "</tr>";
                }
                tableList.innerHTML = str;
            }

            //전체 조회
            let all = document.querySelector("#all");
            all.addEventListener("click",function(){
            let tableList =document.querySelector("#tableList tbody");

            document.querySelector("#tableList tbody").value= "";

            let str = "";
                for(let i = 0; i < dataList.length; i++){
                    str += "<tr>";
                    str += `<td>${dataList[i].id}</td>`;
                    str += `<td>${dataList[i].pw}</td>`;
                    str += `<td>${dataList[i].name}</td>`;
                    str += `<td>${dataList[i].email}</td>`;
                    str += `<td>${dataList[i].createDt}</td>`;
                    str += "</tr>";
                }
                tableList.innerHTML = str
                })

            //id검색

            let searchBtn = document.querySelector("#searchBtn");
            searchBtn.addEventListener("click",function(){
                let tableList = document.querySelector("#tableList tbody");
                let search = document.querySelector("#search").value;

                let str = "";
                for(let i =0; i<dataList.length; i++){
                    if(dataList[i].id === search){
                        str += "<tr>";
                        str += `<td>${dataList[i].id}</td>`;
                        str += `<td>${dataList[i].pw}</td>`;
                        str += `<td>${dataList[i].name}</td>`;
                        str += `<td>${dataList[i].email}</td>`;
                        str += `<td>${dataList[i].createDt}</td>`;
                        str += "</tr>";

                    }
                    tableList.innerHTML =str;
                }
            })

            //제거
            let remove =document.querySelector("#remove");
            remove.addEventListener("click",function(){
            id = document.querySelector("#id").value;

            let removeArr = [];

            for(let i=0; i<dataList.length; i++){
                if(dataList[i].id === id){
                    continue;
                }else{
                    removeArr.push(dataList[i]);
                }
            }
            dataList = removeArr;

            let tableList = document.querySelector("#tableList tbody");
            str ="";
            for(let i = 0; i < dataList.length; i++){
                    str += "<tr>";
                    str += `<td>${dataList[i].id}</td>`;
                    str += `<td>${dataList[i].pw}</td>`;
                    str += `<td>${dataList[i].name}</td>`;
                    str += `<td>${dataList[i].email}</td>`;
                    str += `<td>${dataList[i].createDt}</td>`;
                    str += "</tr>";
            }
            tableList.innerHTML = str;
            })
        }
    </script>
</head>
<body onload="info()">
    <h1>사용자 관리</h1>

    <button id="all">전체조회</button>
    <input type="text" id="search">
    <button id="searchBtn">ID검색</button>

    <table border="1" id="tableList">
        <thead>
            <tr>
                <th>사원ID</th>
                <th>비번</th>
                <th>이름</th>
                <th>이메일</th>
                <th>생성일</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>

    <hr>

    <table border="1">
        <tr>
            <td>사원</td>
            <td><input type="text" id="id"></td>
        </tr>
        <tr>
            <td>비번</td>
            <td><input type="password" id="pw"></td>
        </tr>
        <tr>
            <td>이름</td>
            <td><input type="text" id="name"></td>
        </tr>
        <tr>
            <td>이메일</td>
            <td><input type="text" id="email"></td>
        </tr>
    </table>

    <button type="button" id="add">추가</button>
    <button type="button" id="remove">삭제</button>
    <button type="button" id="update">수정</button>
</body>
</html>
